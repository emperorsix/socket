package com.zhangxuan.net.socket.model;

import java.io.IOException;
import java.nio.ByteBuffer;

public class PingFrame extends Frame {

	@Override
	public void setId(int id) {
		super.setId(id);
	}
	
	@Override
	public int onWrite(byte[] bs) {
		int ri = 0;
		if (bs.length > 4)
			return 0;
		ByteBuffer bf = ByteBuffer.wrap(bs);
		int id = bf.getInt();
		ri += 4;
		setId(id);
		return ri;
	}

	@Override
	protected byte[] onRead(int size) throws IOException {
		int rr = getReadRemain();
		int ri = getReadIndex();
		if (rr < size)
			size = rr;
		ByteBuffer bf = ByteBuffer.allocate(4);
		bf.putInt(getId());
		bf.flip();
		byte[] bs = new byte[size];
		bf.get(bs, ri, size);
		return bs;
	}

	@Override
	public boolean startToWrite() {
		setWriteTotal(4);
		setWriteIndex(0);
		return true;
	}

	@Override
	public boolean startToRead() {
		setReadTotal(4);
		setReadIndex(0);
		return true;
	}

}
