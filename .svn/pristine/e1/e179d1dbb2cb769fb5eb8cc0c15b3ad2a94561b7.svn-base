package com.zhangxuan.net.socket;

import java.io.IOException;

import com.zhangxuan.net.socket.access.AsyncTcpClient;
import com.zhangxuan.net.socket.access.ClientListener;
import com.zhangxuan.net.socket.access.IClient;
import com.zhangxuan.net.socket.model.Frame;
import com.zhangxuan.net.socket.model.PingFrame;

public class ClientTestApp {

	public static void main(String[] args) throws IOException {
		ClientListener cl = new ClientListener() {

			@Override
			public void onConnected(IClient client) {
				System.out.println();
			}

			@Override
			public void onDisconnected(IClient client) {
				// TODO Auto-generated method stub

			}

			@Override
			public void onFrameReceived(Frame frame) throws Exception {
				if (frame instanceof PingFrame) {
					PingFrame pingFrame = (PingFrame) frame;
					int id = pingFrame.getId();
					System.out.println(id);
				}

			}

			@Override
			public void onFrameSent(String frameId) {
			}

		};
		for (int i = 0; i < 1000; i++) {
			AsyncTcpClient client = new AsyncTcpClient("192.168.168.94", 5555, cl);
			client.start();
		}
		while (true) {
			try {
				System.out.print(".");
				Thread.sleep(10000);
			} catch (InterruptedException e) {
				e.printStackTrace();
			}
		}
	}
}
